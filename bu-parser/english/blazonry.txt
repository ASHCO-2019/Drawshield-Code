#
# The definition of the language of blazonry in Backas-Naur Form (BNF)
#
# NOTE: In this implementation ORDER IS IMPORTANT, alternatives are processed in order
# of appearance and the FIRST match will succeed

#############
# Tinctures  
#############
# TODO can't remember how grady is supposed to work
treatment 	::= t-treatment2 t-colour ?t-andd t-colour | \
				t-colour t-treatment2 t-colour | \
				t-treatment1 t-colour
fur 		::= t-fur
colour		::= t-colour
proper		::= t-proper
backref		::= t-backref  # expand this?
counter		::= t-counterchange
semy		::= t-semy ?t-of charge

tincture 	::= treatment | fur | colour | proper | backref | counter | semy

#############
# Divisions
#############
div-type	::= t-division2 tincture ?t-andd tincture | \
				t-division3 tincture ?t-andd tincture ?t-andd tincture | \
				t-division3x tincture ?t-andd tincture ?t-andd tincture | \
				t-division3x tincture ?t-andd tincture
counterdiv	::= div-type t-division2 counter  # test / expand this

div-mods ::= t-divmods*

division ::= div-type ?div-mods

##########################
# Look for some common errors
##########################
# If we didn't find a legitimate reduction above, look for some common errors
# This is not wasteful as they are only processed if there is no match above

bad-division ::= t-division2 tincture } | \
				 t-division2 | \
				 t-division3 tincture ?t-andd tincture | \
				 t-division3 ! Wrong number of tinctures for division

bad-treatment ::= t-treatment2 t-colour | \
				  t-colour t-treatment 2 | \
				  t-treatment2 |\
				  t-treatment1





    
    

